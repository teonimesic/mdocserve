#!/bin/bash

# Pre-push hook to run all tests before pushing
# This ensures that no broken code is pushed to the repository

set -e

echo "ğŸ” Running pre-push checks..."
echo ""

# Check if frontend directory exists and run frontend tests
if [ -d "frontend" ]; then
  echo "ğŸ“¦ Running frontend tests..."
  cd frontend
  npm test -- --run
  cd ..
  echo "âœ… Frontend tests passed"
  echo ""
fi

# Check if Rust project exists and run backend tests
if [ -f "Cargo.toml" ]; then
  echo "ğŸ¦€ Running backend tests..."
  cargo test --quiet
  echo "âœ… Backend tests passed"
  echo ""
fi

echo "âœ… All pre-push checks passed!"
echo "ğŸš€ Pushing to remote..."
